Steps to Install Chef Server in centos7:
----------------------------------------

wget https://packages.chef.io/stable/el/7/chef-server-core-12.6.0-1.el7.x86_64.rpm

rpm -ivh chef-server-core-12.6.0-1.el7.x86_64.rpm

systemctl stop firewalld

chef-server-ctl reconfigure

chef-server-ctl status

chef-server-ctl install chef-manage  --> If this commnad fails then try below commands.
--> wget https://packages.chef.io/files/stable/chef-manage/2.4.0/el/7/chef-manage-2.4.0-1.el7.x86_64.rpm
--> rpm -ivh chef-manage-2.4.0-1.el7.x86_64.rpm

chef-manage-ctl reconfigure

chef-server-ctl reconfigure

mkdir /home/empadmin/.chef

chef-server-ctl user-create chefadmin krushna sahu mailkrushna@gmail.com 'chef123' --filename /home/empadmin/.chef/chefadmin.pem

chef-server-ctl org-create ability abilitynetwork --association_user chefadmin --filename /home/empadmin/.chef/abilityvalidator.pem

#note :- copy chefadmin.pem & abilityvalidator.pem to workstation machine to /home/empadmin/.chef/

rpm -e manage-chef    --> To remove chef Web UI.


Steps to Install Workstation:
------------------------------------------------------


vi /etc/hosts            --> Add chef-server hostname with Ip.

wget https://packages.chef.io/stable/el/7/chefdk-0.14.25-1.el7.x86_64.rpm

rpm -ivh chefdk-0.14.25-1.el7.x86_64.rpm

mkdir /home/empadmin/.chef 

knife.rb  --Create this file below data

# See https://docs.getchef.com/config_rb_knife.html for more information on knife configuration options

current_dir = File.dirname(__FILE__)
log_level                :info
log_location             STDOUT
node_name                "chefadmin"
#client_key               "#{current_dir}/chefadmin.pem"
client_key               "/home/empadmin/.chef/chefadmin.pem"
chef_server_url          "https://example1.sample.com/organizations/ability"
cookbook_path            ["#{current_dir}/../cookbooks"]
#cookbook_path            ["/home/empadmin/chef-repo/cookbooks", "/home/empadmin/chef-repo/cookbooks/Eligibility-Switch", "/home/empadmin/chef-repo/cookbooks/ES"]



trusted_certs         --> Create this directoty.

cd /var/opt/opscode/nginx/ca/     --> Copt cert file from chef-server machine to the above cert directory.


mkdir /home/empadmin/chef-repo      --> Create chef repo directory.

knife ssl check

knife create cookbook cookbook_name.

Note: Before bootstraping add chef-server hostname and IP in client machine  /etc/hosts.


BOOTSTRAP COMMAND:


knife bootstrap node_domain_or_IP -x username -P password -N name_for_node --sudo


sudo /opt/chefdk/embedded/bin/gem install knife-windows


knife bootstrap windows winrm 10.164.1.100 -x administrator -P Totally#1 --node-name winserver1.test.local -V
